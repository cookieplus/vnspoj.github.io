---
layout: post
title:  "CP - Số chính phương"
categories: [dp]
code: CP
src: CP.cpp
---

John là một người rất đam mê toán học, một lần cậu viết ra một dãy số các chữ số và nhận ra rằng dãy số vừa viết có thể tách thành một số đoạn con liên tiếp, mà mỗi đoạn con tạo thành một số là số chính phương.
Ví dụ: dãy số 149 có thể tách thành 3 đoạn: 1, 4, 9 -> mỗi đoạn đều là số chính phương hoặc có thể tách thành 2 đoạn 1 và 49.
John muốn biết là có bao nhiêu cách tách khác nhau (hai cách tách được gọi là khác nhau nếu tồn tại một vị trí tách khác nhau) dãy chữ số mình vừa viết. Điều kiện là các đoạn tách ra không bắt đầu bằng chữ số 0.

#### Input
- Dòng đầu là số lượng test: nTest.
- nTest dòng tiếp theo mỗi dòng ghi ra dãy chữ số mà John viết (độ dài không quá 100).

#### Output
- Với mỗi test ghi ra số lượng cách tìm được trên 1 dòng.

#### Example

```
Input:
1
169

Output:
2
```

<!--more-->

Mấu chốt bài này là làm sao để kiểm tra 1 số lớn (`100` chữ số) có phải số chính phương không. Phần còn lại giải quyết dễ dàng bằng QHĐ.

Nhận xét rằng với một modulo `X` bất kỳ thì tập giá trị của biểu thức `T^2 mod X` có lực lượng `<= X/2+1`. Do đó ta có thể random `X`, sau đó kiểm tra số nhập vào `mod X` có nằm trong tập trên không. Nếu không thì chắc chắn không phải số chính phương, nếu có thì có thể. Thực hiện với 20 số `X` khác nhau thì tỉ lệ sai chỉ là `1/2^20` (đủ để AC).
